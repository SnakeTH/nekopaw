*preinstalled=0

[main]
$main.url='http://zerochan.net/';
$main.icon='zerochan.net.bmp';
$picture.fields(url,preview,post_url,title,width:i,height:i,score:i,aspect_ratio:f);
$main.short = 'zero';

$main.checkcookie = 'z_hash';
$userstring = 'name';
$pwdstring = 'password';
$main.login = '$main.url+"login?ref=/&"+$userstring+"="+$login+"&"+$pwdstring+"="+$password+"&login=Login"';


$gui_thumbs_part = '.240.';
$gui_images_part = '.full.';
$picsperpage = 24;

[listscript]
$thread.url = "$main.url+@httpencode(@replace('%2C',' ',$tag))";
$thread.xml = 'fpgui';
thread.execute();
$thread.xml = 'listgui';
$thread.url = "$main.url+@httpencode(@replace('%2C',' ',$tag))+'?p='+$thread.counter+1";

[dwscript]
$thread.url = $picture%url;
$thread.referer = $picture%post_url;

[fpgui]
$score = 0;
^ul#id='thumbs2'{
	^a#tabindex='1'{
		$post_url = #href;
		^span{
			$score = @copyto(" ",@text);
		}
		^img{
			addpicture(
				%url=@replace($gui_images_part,$gui_thumbs_part,#src),
				%preview=#src,
				%post_url=$main.url+@trim($post_url,"/"),
				%title = #alt,
				%width=@isempty(@trim(@copyto("x",@copyto(" ",#title))),0),
				%height=@isempty(@trim(@copyfrom("x",@copyto(" ",#title))),0),
				%score=$score,
				%aspect_ratio=$picture%width/$picture%height,
			);
			$picture.filename = @emptyname($picture%url);
		}
	}
}
^p#class='pagination'{
	$thread.count = @isempty(@copybackto(" ",@replace("",",",@trim(@text))),1);
	$thread.result = $thread.count * $picsperpage;
}

[listgui]
^ul#id='thumbs2'{
	^a#tabindex='1'{
		$post_url = #href;
		^span{
			$score = @copyto(" ",@text);
		}
		^img{
			addpicture(
				%url=@replace($gui_images_part,$gui_thumbs_part,#src),
				%preview=#src,
				%post_url=$main.url+@trim($post_url,"/"),
				%title = #alt,
				%width=@isempty(@trim(@copyto("x",@copyto(" ",#title))),0),
				%height=@isempty(@trim(@copyfrom("x",@copyto(" ",#title))),0),
				%score=$score,
				%aspect_ratio=$picture%width/$picture%height,
			);
			$picture.filename = @emptyname($picture%url);
		}
	}
}