*preinstalled=0

[main]
$main.url = 'http://www.hentai-foundry.com/';
$main.icon = 'hentai-foundry.com.bmp';
$picture.fields(preview,post_url,title,author);
$main.short = 'nbyn';

$main.checkcookie = '';
$userstring = 'username';
$pwdstring = 'password';
$main.login = '$main.url+"login.php?"+$userstring+"="+$login+"&"+$pwdstring+"="+$password+"&remember=1"';

@addfield("searchin","Search In","listbox","all","all","title","keywords","description");
@addfield("limituser","Limit User","textedit","");
@addfield("limitsize","Limit Size (w x h)","multiedit"
,("listbox","<","<","=",">")
,("integeredit","0")
,("listbox","<","<","=",">")
,("integeredit","0"));
@addfield("limitrating","Limit Rating","checkbox",0);
@addfield("nudity","Nudity","multiedit"
,("indexlistbox",0,"At Most","At Last","Ignore")
,("indexlistbox",3,"None","Mild","Moderate","Explicit"));
@addfield("violence","Violence","multiedit"
,("indexlistbox",0,"At Most","At Last","Ignore")
,("indexlistbox",3,"None","Comic or Mild","Moderate","Explicit or Graphic"));
@addfield("sexual","Sexual Content","multiedit"
,("indexlistbox",0,"At Most","At Last","Ignore")
,("indexlistbox",3,"None","Mild","Moderate","Explicit"));
@addfield("racism","Racism","multiedit"
,("indexlistbox",0,"At Most","At Last","Ignore")
,("indexlistbox",3,"None","Mild","Moderate","Strong"));
@addfield("spoilers","Spoilers","multiedit"
,("indexlistbox",0,"At Most","At Last","Ignore")
,("indexlistbox",3,"None","Mild","Moderate","Major"));
@addfield("profanity","Profanity","multiedit"
,("indexlistbox",0,"At Most","At Last","Ignore")
,("indexlistbox",3,"None","Mild","Moderate","Proliferous or Severe"));
@addfield("male","Male","indexlistbox",0,"Allow","Block","Require");
@addfield("female","Female","indexlistbox",0,"Allow","Block","Require");
@addfield("yaoi","Shonen-ai / Yaoi","indexlistbox",0,"Allow","Block","Require");
@addfield("yuri","Shoujo-ai / Yuri","indexlistbox",0,"Allow","Block","Require");
@addfield("loli","Lolicon","indexlistbox",1,"Allow","Block","Require");
@addfield("shota","Shotacon","indexlistbox",1,"Allow","Block","Require");
@addfield("teen","Teen","indexlistbox",1,"Allow","Block","Require");
@addfield("guro","Guro","indexlistbox",1,"Allow","Block","Require");
@addfield("trans","Futa (transgender)","indexlistbox",1,"Allow","Block","Require");
@addfield("furry","Furry (anthros)","indexlistbox",1,"Allow","Block","Require");
@addfield("beast","Bestiality","indexlistbox",1,"Allow","Block","Require");
@addfield("other","Other","indexlistbox",1,"Allow","Block","Require");

$picsperpage = 25;

[listscript]

$thread.url = "$main.url + '?enterAgree=1'";

@thread.execute;

$thread.tryext = "jpg,gif,png,swf";
$thread.xmlcontent = 'html';

`
http://www.hentai-foundry.com/search/index?enterAgree=1&size=1550&page=1&query=&search_in=all&scraps=0&limit[size][width][compare]=%3C&limit[size][width][value]=&limit[size][height][compare]=%3C&limit[size][height][value]=&limit[cat][value]=0&limit[user][username]=
&limit[rating][on]=1
&limit[rating][rating_nudity][action]=%3C%3D&limit[rating][rating_nudity][value]=3
&limit[rating][rating_violence][action]=%3C%3D&limit[rating][rating_violence][value]=3
&limit[rating][rating_profanity][action]=%3C%3D&limit[rating][rating_profanity][value]=3
&limit[rating][rating_racism][action]=%3C%3D&limit[rating][rating_racism][value]=3
&limit[rating][rating_sex][action]=%3C%3D&limit[rating][rating_sex][value]=3
&limit[rating][rating_spoilers][action]=%3C%3D&limit[rating][rating_spoilers][value]=3
&limit[rating][rating_yaoi][action]=-1
&limit[rating][rating_yuri][action]=1
&limit[rating][rating_loli][action]=0
&limit[rating][rating_shota][action]=0
&limit[rating][rating_teen][action]=0
&limit[rating][rating_guro][action]=0
&limit[rating][rating_furry][action]=0
&limit[rating][rating_beast][action]=0
&limit[rating][rating_male][action]=-1
&limit[rating][rating_female][action]=-1
&limit[rating][rating_futa][action]=0
&limit[rating][rating_other][action]=0&yt0=Search
`



$thread.url = $main.url + "search/index?enterAgree=1&scraps=0&query=" + @httpencode($tag) + "&search_in=" + $searchin;

?($limitsize[2]>0)|($limitsize[4]>0){
	$thread.url = $thread.url + "&limit[size][on]=1";
	?($limitsize[2]>0){
		$thread.url = $thread.url + "&limit[size][width][compare]=" + @httpencode($limitsize[1])
		+ "&limit[size][width][value]=" + $limitsize[2];
	}
	?($limitsize[4]>0){
		$thread.url = $thread.url + "&limit[size][height][compare]=" + @httpencode($limitsize[3])
		+ "&limit[size][height][value]=" + $limitsize[4];
	}
}

?(@isempty($limituser)=0){
	$thread.url = $thread.url + "&limit[user][on]=1&limit[user][username]=" + @httpencode($limituser);
}

?($limitrating="True"){
	$thread.url = $thread.url + "&limit[rating][on]=1"
	+ "&limit[rating][rating_nudity][action]=" + @httpencode(@listitem($nudity[1],"<=",">=","-1")) + "&limit[rating][rating_nudity][value]=" + $nudity[2]
	+ "&limit[rating][rating_violence][action]=" + @httpencode(@listitem($violence[1],"<=",">=","-1")) + "&limit[rating][rating_violence][value]=" + $violence[2]
	+ "&limit[rating][rating_profanity][action]=" + @httpencode(@listitem($profanity[1],"<=",">=","-1")) + "&limit[rating][rating_profanity][value]=" + $profanity[2]
	+ "&limit[rating][rating_racism][action]=" + @httpencode(@listitem($racism[1],"<=",">=","-1")) + "&limit[rating][rating_racism][value]=" + $racism[2]
	+ "&limit[rating][rating_sex][action]=" + @httpencode(@listitem($sexual[1],"<=",">=","-1")) + "&limit[rating][rating_sex][value]=" + $sexual[2]
	+ "&limit[rating][rating_spoilers][action]=" + @httpencode(@listitem($spoilers[1],"<=",">=","-1")) + "&limit[rating][rating_spoilers][value]=" + $spoilers[2]
	+ "&limit[rating][rating_yaoi][action]=" + ($yaoi-1)
	+ "&limit[rating][rating_yuri][action]=" + ($yuri-1)
	+ "&limit[rating][rating_loli][action]=" + ($loli-1)
	+ "&limit[rating][rating_shota][action]=" + ($shota-1)
	+ "&limit[rating][rating_teen][action]=" + ($teen-1)
	+ "&limit[rating][rating_guro][action]=" + ($guro-1)
	+ "&limit[rating][rating_furry][action]=" + ($furry-1)
	+ "&limit[rating][rating_beast][action]=" + ($beast-1)
	+ "&limit[rating][rating_male][action]=" + ($male-1)
	+ "&limit[rating][rating_female][action]=" + ($female-1)
	+ "&limit[rating][rating_futa][action]=" + ($trans-1)
	+ "&limit[rating][rating_other][action]=" + ($other-1);
}

$thread.url = "'" + $thread.url + "&page=' + $thread.counter + 1";

`
$thread.url = "$main.url + 'search.php?query=' + @httpencode($tag) + '&search_type[0]=pictures" +
"&search_type[1]=' + $searchin + '&filter_media=A&filter_order=date_new&filter_type=' + $type + '" +
"&filter_male=' + $male + '&filter_female=' + $female + '&filter_nudity=' + $nudity + '" +
"&filter_violence=' + $violence + '&filter_sex=' + $sexual + '&filter_yaoi=' + $yaoi + '" + 
"&filter_racism=' + $racism + '&filter_spoilers=' + $spoilers + '&filter_profanity=' + $profanity + '" +
"&filter_yuri=' + $yuri + '&filter_loli=' + $loli + '&filter_shota=' + $shota + '&filter_teen=' + $teen + '" +
"&filter_other=' + $other + '&filter_guro=' + $guro + '&filter_futa=' + $trans + '&filter_furry=' + $furry + '" +
"&filter_beast=' + $beast + '&submit=Search&pageID=' + $thread.counter + 1";
`

$thread.xml = 'xmlscript';
@thread.execute;

[dwscript]
$thread.url = @replace("//pictures.","//www.",$main.url) + @lowcase(@copy(1,1,$picture%author)) + "/" + $picture%author + "/" + @urlvar("pid",$picture%preview) + ".%ext%";
$thread.referer = $picture%post_url;

[xmlscript]
^td#class='thumb_square'{
	$href = 0;
	^a{
		$href = #href;
		^img#class='thumb'{
			addpicture(%post_url = $main.url+@trim($href,"/"),
				%preview = #src,
				%title = #alt,
				%author = @copyfromtoex("/","/user/",$href),
			);
			$picture.filename = @urlvar("pid",#src) + ".%ext%";
		}
	}
}

^div#class='pager'{
	^li#class='last'{
		^a{
			$thread.count = @ifempty(@urlvar("page",#href),1);
			$thread.result = $thread.count * $picsperpage;
		}
	}
}