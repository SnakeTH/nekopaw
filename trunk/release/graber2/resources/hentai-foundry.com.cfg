*preinstalled=0

[main]
$main.url = 'http://www.hentai-foundry.com/';
$main.icon = 'hentai-foundry.com.bmp';
$picture.fields(preview,post_url,title,author);
$main.short = 'nbyn';

$main.checkcookie = '';
$userstring = 'username';
$pwdstring = 'password';
$main.login = '$main.url+"login.php?"+$userstring+"="+$login+"&"+$pwdstring+"="+$password+"&remember=1"';
$main.pagebypage = 1;

@addfield("searchin","Search In","all","listbox","all","title","keywords","description");
@addfield("type","Type",0,"indexlistbox","All","Pictures","Flash","Comic/Manga");
@addfield("nudity","Nudity",3,"indexlistbox","None","Mild","Moderate","High");
@addfield("violence","Violence",3,"indexlistbox","None","Mild","Moderate","High");
@addfield("sexual","Sexual Content",3,"indexlistbox","None","Mild","Moderate","High");
@addfield("racism","Racism",3,"indexlistbox","None","Mild","Moderate","High");
@addfield("spoilers","Spoilers",3,"indexlistbox","None","Mild","Moderate","High");
@addfield("profanity","Profanity",3,"indexlistbox","None","Mild","Moderate","High");
@addfield("male","Show Male",1,"checkbox");
@addfield("female","Show Female",1,"checkbox");
@addfield("yaoi","Show YAOI",0,"checkbox");
@addfield("yuri","Show YURI",1,"checkbox");
@addfield("loli","Show Loli",0,"checkbox");
@addfield("shota","Show Shota",0,"checkbox");
@addfield("teen","Show Teen",0,"checkbox");
@addfield("other","Show Other",0,"checkbox");
@addfield("guro","Show Guro",0,"checkbox");
@addfield("trans","Show Transgender",0,"checkbox");
@addfield("furry","Show furry (anthros)",0,"checkbox");
@addfield("beast","Show Bestiality",0,"checkbox");

$picsperpage = 25;

[listscript]

$thread.url = "$main.url + 'enter_agree.php'";

@thread.execute;

$thread.tryext = "jpg,gif,png,swf";
$thread.xmlcontent = 'html';
$thread.url = "$main.url + 'search.php?query=' + @httpencode($tag) + '&search_type[0]=pictures" +
"&search_type[1]=' + $searchin + '&filter_media=A&filter_order=date_new&filter_type=' + $type + '" +
"&filter_male=' + $male + '&filter_female=' + $female + '&filter_nudity=' + $nudity + '" +
"&filter_violence=' + $violence + '&filter_sex=' + $sexual + '&filter_yaoi=' + $yaoi + '" + 
"&filter_racism=' + $racism + '&filter_spoilers=' + $spoilers + '&filter_profanity=' + $profanity + '" +
"&filter_yuri=' + $yuri + '&filter_loli=' + $loli + '&filter_shota=' + $shota + '&filter_teen=' + $teen + '" +
"&filter_other=' + $other + '&filter_guro=' + $guro + '&filter_futa=' + $trans + '&filter_furry=' + $furry + '" +
"&filter_beast=' + $beast + '&submit=Search&pageID=' + $thread.counter + 1";

$thread.xml = 'xmlscript';
@thread.execute;

[dwscript]
$thread.url = @replace("//pictures.","//www.",$main.url) + @lowcase(@copy(1,1,$picture%author)) + "/" + $picture%author + "/" + @urlvar("pid",$picture%preview) + ".%ext%";
$thread.referer = $picture%post_url;

[xmlscript]
^td#class='thumb_square'{
	$n = 0;
	$title = 0;
	$author = 0;
	$href = 0;
	^a{
		?$n = 1{
			$n = 2;
			$author = @text;
		}
		?$n = 0{
			$n = 1;
			$title = @text;
			$href = #href;
		}
		^img{
			addpicture(%post_url= $href,
				%preview = #src,
				%title = $title,
				%author = $author
			);
			$picture.filename = @urlvar("pid",#src) + ".%ext%";
		}
	}
}

^div#class='page_numbers'{
	^a{
		$thread.count = @isempty(@urlvar("pageID",#href),1);
	}
}